{"remainingRequest":"C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\src\\components\\AnnotationsPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\src\\components\\AnnotationsPage.vue","mtime":1651573663345},{"path":"C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650967931317},{"path":"C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1650967931208},{"path":"C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\node_modules\\babel-loader\\lib\\index.js","mtime":1650967932013},{"path":"C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650967931317},{"path":"C:\\Users\\Roi Alfassi\\Documents\\Study\\Parashoot-Tagging\\node_modules\\vue-loader\\lib\\index.js","mtime":1650967933141}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport _JSON$stringify from \"C:\\\\Users\\\\Roi Alfassi\\\\Documents\\\\Study\\\\Parashoot-Tagging\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Roi Alfassi\\\\Documents\\\\Study\\\\Parashoot-Tagging\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport firebase from 'firebase';\nvar config = {\n  apiKey: \"AIzaSyB70IFdsSJ056tK0OWqEJMEnzhRQuAHuPI\",\n  authDomain: \"parashot-88db8.firebaseapp.com\",\n  projectId: \"parashot-88db8\",\n  storageBucket: \"parashot-88db8.appspot.com\",\n  messagingSenderId: \"754346365422\",\n  appId: \"1:754346365422:web:3a3c5096fed773e4237eff\",\n  measurementId: \"G-8Q98XS0NPJ\"\n};\nvar firebaseApp = firebase.initializeApp(config);\nvar db = firebaseApp.firestore();\nvar userCollection = db.collection('users');\nexport var addAnnotationToDB = function addAnnotationToDB(tag) {\n  return userCollection.add(tag);\n};\n\nvar uuidv4 = require('uuid/v4');\n\nexport default {\n  name: \"AnnotationsPage\",\n  props: [\"json\"],\n  data: function data() {\n    return {\n      data_number: 1,\n      context_number: 1,\n      question: \"\",\n      answer: \"\",\n      fields: [\"שאלות\", \"תשובות\", \"עריכה\", \"יש תשובה בטקסט\"],\n      query: \"\",\n      message: \"\",\n      errors: \"\",\n      textSelected: false,\n      toEnd: false,\n      withAnswer: true\n    };\n  },\n  methods: {\n    addAnnotation: function addAnnotation() {\n      if (this.checkAnswers() == false) return;\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[this.context_number - 1];\n      var qa = {\n        question: this.question,\n        id: uuidv4(),\n        answers: [{\n          answer_start: this.answer_start,\n          text: this.answer,\n          withAnswer: this.withAnswer\n        }]\n      };\n      paragraph_container.qas.push(qa);\n      this.question = \"\";\n      this.answer = \"\";\n      this.textSelected = false;\n    },\n    deleteAnnotation: function deleteAnnotation(row_index) {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[this.context_number - 1];\n      paragraph_container.qas.splice(row_index, 1);\n    },\n    getSelection: function getSelection(fixStr) {\n      this.answer = fixStr;\n      this.textSelected = true;\n    },\n    delete_paragraph: function delete_paragraph() {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs;\n      paragraph_container.splice([this.context_number - 1], 1);\n    },\n    delete_empty_document: function delete_empty_document() {\n      for (var i in this.json.data) {\n        if (this.json.data[i].paragraphs.length == 0) {\n          this.json.data.splice(i, 1);\n        }\n      }\n    },\n    checkAnswers: function checkAnswers() {\n      // eslint-disable-next-line no-console\n      // console.log(this)\n      if (this.question == \"\" || this.answer == \"\") {\n        this.errors = \"נא להכניס שאלה על הפסקה ותשובה לשאלה זו מתוך הפסקה\";\n        return false;\n      } else {\n        this.errors = \"\";\n        return true;\n      }\n    },\n    saveJSON: function () {\n      var _saveJSON = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(type) {\n        var json1, tosend;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.json.data[this.data_number - 1].paragraphs[this.context_number - 1].qas.length == 0)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                //if page is empty do not save\n                if (type == \"end\") this.toEnd = true;\n                json1 = _JSON$stringify(this.json).replace(/[\\u007F-\\uFFFF]/g, function (chr) {\n                  return \"\\\\u\" + (\"0000\" + chr.charCodeAt(0).toString(16)).substr(-4);\n                });\n                tosend = {\n                  'json_data': json1,\n                  'prolificID': this.json.prolificID,\n                  'filename': \"heb_squad-v1.1_\" + this.pad(this.json.jsonID, 3) + \"_\" + \"Tagged\" + \".json\"\n                };\n                _context.next = 7;\n                return addAnnotationToDB(tosend);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function saveJSON(_x) {\n        return _saveJSON.apply(this, arguments);\n      }\n\n      return saveJSON;\n    }(),\n    getAnotherFile: function () {\n      var _getAnotherFile = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.saveJSON(\"continue\");\n                this.jsonID = this.getRandomInt(21, 399).toString();\n                this.json = require(\"../../src/json_resources/heb_squad-v1.1_\" + this.pad(this.jsonID, 3) + \".json\");\n                this.json.jsonID = this.jsonID;\n                this.data_number = 1;\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getAnotherFile() {\n        return _getAnotherFile.apply(this, arguments);\n      }\n\n      return getAnotherFile;\n    }(),\n    getRandomInt: function getRandomInt(min, max) {\n      min = Math.ceil(min);\n      max = Math.floor(max);\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    },\n    pad: function pad(num, size) {\n      while (num.length < size) {\n        num = \"0\" + num;\n      }\n\n      return num;\n    },\n    getName: function getName() {\n      // eslint-disable-next-line no-console\n      // console.log(this);\n      // this.filename \n      // return this.json.data[0].title + \" tagged\";\n      var tmpJsonID = this.json.jsonID; // delete this.json.jsonID;\n\n      return \"annotated_data_\" + tmpJsonID + \".json\";\n    }\n  },\n  computed: {\n    valid_json: function valid_json() {\n      var json = _JSON$stringify(this.json).replace(/[\\u007F-\\uFFFF]/g, function (chr) {\n        return \"\\\\u\" + (\"0000\" + chr.charCodeAt(0).toString(16)).substr(-4);\n      });\n\n      return json;\n    },\n    autocomplete: function autocomplete() {\n      var idx = [];\n\n      for (var i = 0; i < this.json.data.length; i++) {\n        idx.push(this.json.data[i].title);\n      }\n\n      return idx;\n    },\n    items: function items() {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[this.context_number - 1];\n      var items = [];\n\n      for (var i = 0; i < paragraph_container.qas.length; i++) {\n        var item = {\n          // fields: [\"שאלות\", \"תשובות\", \"עריכה\" , \"יש-תשובה\"]\n          שאלות: paragraph_container.qas[i].question,\n          תשובות: paragraph_container.qas[i].answers[0].text,\n          'יש תשובה בטקסט': paragraph_container.qas[i].answers[0].withAnswer\n        };\n        items.push(item);\n      }\n\n      return items;\n    },\n    paragraph_context: function paragraph_context() {\n      return this.json.data[this.data_number - 1].paragraphs[this.context_number - 1].context;\n    },\n    answer_start: function answer_start() {\n      return this.paragraph_context.indexOf(this.answer);\n    },\n    options: function options() {\n      return {\n        radius: 15,\n        circleLineCap: \"round\",\n        varyStrokeArray: [1, 2],\n        pathColors: [\"lightgrey\", \"rgb(40, 167, 69)\"],\n        text: function text(value) {\n          return this.htmlifyNumber(value) + '<span style=\"font-size: 1em;\">%</span>';\n        },\n        textColor: \"black\"\n      };\n    }\n  }\n};",{"version":3,"sources":["AnnotationsPage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"AnnotationsPage container mt-3\">\r\n    <div>\r\n      <b-navbar sticky toggleable=\"lg\" class=\"pl-0\">\r\n        <b-navbar-brand>cdQA-annotator - Welcome User Number {{this.json.prolificID}}</b-navbar-brand>\r\n\r\n        <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\r\n\r\n        <b-collapse id=\"nav-collapse\" is-nav>\r\n          <!-- Right aligned nav items -->\r\n          <b-navbar-nav class=\"ml-auto\">\r\n            <b-nav-item>\r\n              <svg-progress-bar :value=\"data_number / json.data.length * 100\" :options=\"options\"></svg-progress-bar>\r\n            </b-nav-item>\r\n            <b-nav-form>\r\n              <!-- <vue-bootstrap-typeahead\r\n                size=\"sm\"\r\n                v-model=\"query\"\r\n                :data=\"autocomplete\"\r\n                placeholder=\"Search a document...\"\r\n                @hit=\"data_number = autocomplete.indexOf($event) + 1; context_number = 1\"\r\n              /> -->\r\n            </b-nav-form>\r\n              <!-- <p>Message is: {{ message }}</p> -->\r\n            <b-nav-item right>\r\n              <b-button\r\n                :size=\"'sm'\"\r\n                :variant=\"'primary'\"\r\n                v-on:click=\"delete_empty_document()\"\r\n                v-download-data=\"valid_json\"\r\n                v-download-data:type=\"'json'\"\r\n                v-download-data:filename=\"getName()\"\r\n              >Download</b-button>\r\n            </b-nav-item>\r\n          </b-navbar-nav>\r\n        </b-collapse>\r\n      </b-navbar>\r\n    </div>       \r\n    <br>\r\n    <div v-if=\"this.toEnd == false\">\r\n      <!-- <h2>{{ json.data[data_number - 1].title }}</h2> -->\r\n      <span\r\n        class=\"text-muted\" dir=\"rtl\" \r\n      >פסקה {{ context_number }} מתוך {{ json.data[data_number - 1].paragraphs.length }} | מסמך {{ data_number }} מתוך {{ json.data.length }}</span>\r\n      <br>\r\n      <br>\r\n      <p ref=\"paragraph\" v-selection.fix=\"{getSelection:getSelection}\" dir=\"rtl\">{{ paragraph_context }}</p>\r\n      <br>\r\n\r\n      <b-form-input v-model=\"question\" type=\"text\" placeholder=\"הקלידו שאלה לגבי הטקסט...\" dir=\"rtl\"></b-form-input>\r\n      <br>\r\n\r\n      <b-form-input v-model=\"answer\" type=\"text\" placeholder=\"סמנו תשובה מתוך הפסקה - היא תופיע פה\" dir=\"rtl\"></b-form-input>\r\n      <br>\r\n\r\n      <div class=\"demo\">\r\n        <div>סוג שאלה:</div>\r\n        <input type=\"radio\" id=\"one\" value=true v-model=\"withAnswer\" />\r\n        <label for=\"one\">שאלה עם תשובה בטקסט</label>\r\n        <br>\r\n        <input type=\"radio\" id=\"two\" value=false v-model=\"withAnswer\"/>\r\n        <label for=\"two\">שאלה שאין לה תשובה בטקסט</label>\r\n        <br>\r\n        <br>\r\n      </div>\r\n      <b-button :size=\"''\" :variant=\"'secondary'\" v-on:click=\"addAnnotation()\">הוספת שאלה ותשובה</b-button> \r\n      <br>\r\n      <br>\r\n      <p style=\"color:red;\">{{ errors }}</p>\r\n      <br>\r\n      <br>\r\n\r\n      <b-table striped hover :items=\"items\" :fields=\"fields\">\r\n        <template slot=\"עריכה\" slot-scope=\"row\">\r\n          <b-button :size=\"''\" :variant=\"'danger'\" @click.stop=\"deleteAnnotation(row.index)\">Delete</b-button>\r\n        </template>\r\n      </b-table>\r\n      <br>\r\n\r\n      <div v-if=\"data_number > 1 && context_number == 1\">\r\n        <b-button\r\n          :size=\"''\"\r\n          :variant=\"'outline-secondary'\"\r\n          v-on:click=\"saveJSON('end')\"\r\n        >סיימתי</b-button>\r\n         או \r\n        <b-button :size=\"''\" :variant=\"'outline-primary'\" v-on:click=\"getAnotherFile()\">לפסקה הבאה</b-button>\r\n      </div>\r\n      <div v-else-if=\"context_number < json.data[data_number - 1].paragraphs.length\">\r\n        <b-button\r\n          :size=\"''\"\r\n          :variant=\"'outline-secondary'\"\r\n          v-on:click=\"saveJSON('end')\"\r\n        >סיימתי</b-button>\r\n         או \r\n        <b-button :size=\"''\" :variant=\"'outline-primary'\" v-on:click=\"getAnotherFile()\">לפסקה הבאה</b-button>\r\n      </div>\r\n      <div v-else>\r\n        <b-button\r\n          :size=\"''\"\r\n          :variant=\"'outline-secondary'\"\r\n          v-on:click=\"saveJSON('end')\"\r\n        >סיימתי</b-button> \r\n        או \r\n        <b-button\r\n          :size=\"''\"\r\n          :variant=\"'outline-primary'\"\r\n          v-on:click=\"getAnotherFile()\"\r\n        >לפסקה הבאה</b-button>\r\n      </div>\r\n      <br>\r\n      <br>\r\n    </div>\r\n    <div v-else>\r\n     תיוג מסמך הסתיים בהצלחה\r\n     <br>\r\n      <b-button\r\n          :size=\"''\"\r\n          :variant=\"'primary'\"\r\n          href=\"prolific.co\"\r\n      >To Prolific\r\n      </b-button>\r\n      <br>\r\n      <br>\r\n      <!-- <b-button\r\n          :size=\"''\"\r\n          :variant=\"'primary'\"\r\n          v-on:click=\"getRandomFile()\"\r\n      >תנו לי עוד אחד\r\n      </b-button> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport firebase from 'firebase'\r\nconst config ={\r\n        apiKey: \"AIzaSyB70IFdsSJ056tK0OWqEJMEnzhRQuAHuPI\",\r\n        authDomain: \"parashot-88db8.firebaseapp.com\",\r\n        projectId: \"parashot-88db8\",\r\n        storageBucket: \"parashot-88db8.appspot.com\",\r\n        messagingSenderId: \"754346365422\",\r\n        appId: \"1:754346365422:web:3a3c5096fed773e4237eff\",\r\n        measurementId: \"G-8Q98XS0NPJ\"\r\n}\r\nconst firebaseApp = firebase.initializeApp(config)\r\n\r\nconst db = firebaseApp.firestore()\r\nconst userCollection = db.collection('users')\r\n\r\nexport const addAnnotationToDB = tag => {\r\n    return userCollection.add(tag)\r\n}\r\nconst uuidv4 = require('uuid/v4');\r\n\r\nexport default {\r\n  name: \"AnnotationsPage\",\r\n  props: [\"json\" ],\r\n  data: function() {\r\n    return {\r\n      data_number: 1,\r\n      context_number: 1,\r\n      question: \"\",\r\n      answer: \"\",\r\n      fields: [\"שאלות\", \"תשובות\", \"עריכה\" , \"יש תשובה בטקסט\"],\r\n      query: \"\",\r\n      message: \"\",\r\n      errors: \"\",\r\n      textSelected: false,\r\n      toEnd: false,\r\n      withAnswer:true\r\n    };\r\n  },\r\n  methods: {\r\n    addAnnotation: function() {\r\n      if(this.checkAnswers() == false) return\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ];\r\n      var qa = {\r\n        question: this.question,\r\n        id: uuidv4(),\r\n        answers: [{ answer_start: this.answer_start, text: this.answer ,withAnswer:this.withAnswer }]\r\n      };\r\n      paragraph_container.qas.push(qa);\r\n      this.question = \"\";\r\n      this.answer = \"\";\r\n      this.textSelected = false;\r\n    },\r\n    deleteAnnotation: function(row_index) {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ];\r\n      paragraph_container.qas.splice(row_index, 1);\r\n    },\r\n    getSelection: function(fixStr) {\r\n      this.answer = fixStr;\r\n      this.textSelected = true;\r\n    },\r\n    delete_paragraph: function() {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs;\r\n      paragraph_container.splice([this.context_number - 1], 1);\r\n    },\r\n    delete_empty_document: function() {\r\n      for (var i in this.json.data) {\r\n        if (this.json.data[i].paragraphs.length == 0) {\r\n          this.json.data.splice(i, 1);\r\n        }\r\n      }\r\n    },\r\n    checkAnswers: function(){\r\n      // eslint-disable-next-line no-console\r\n      // console.log(this)\r\n      if(this.question == \"\" || this.answer ==\"\"){\r\n        this.errors = \"נא להכניס שאלה על הפסקה ותשובה לשאלה זו מתוך הפסקה\";\r\n        return false;\r\n      }\r\n      else{\r\n          this.errors = \"\";\r\n          return true;\r\n      }\r\n    },\r\n    saveJSON: async function (type) {\r\n      if(this.json.data[this.data_number - 1].paragraphs[this.context_number - 1].qas.length == 0) return;//if page is empty do not save\r\n      if(type == \"end\")\r\n        this.toEnd = true;\r\n      var json1 = JSON.stringify(this.json).replace(/[\\u007F-\\uFFFF]/g, function(\r\n        chr\r\n      ) {\r\n        return \"\\\\u\" + (\"0000\" + chr.charCodeAt(0).toString(16)).substr(-4);\r\n      });\r\n      let tosend = {\r\n        'json_data': json1,\r\n        'prolificID': this.json.prolificID,\r\n        'filename': \"heb_squad-v1.1_\" + this.pad(this.json.jsonID, 3) + \"_\" + \"Tagged\" + \".json\"\r\n      }\r\n      await addAnnotationToDB(tosend);\r\n    },\r\n    getAnotherFile: async function () {\r\n      this.saveJSON(\"continue\");\r\n      this.jsonID = this.getRandomInt(21, 399).toString();\r\n      this.json = require(\"../../src/json_resources/heb_squad-v1.1_\" + this.pad(this.jsonID, 3) + \".json\");\r\n      this.json.jsonID = this.jsonID;\r\n      this.data_number = 1;\r\n    },\r\n    getRandomInt: function (min, max) {\r\n      min = Math.ceil(min);\r\n      max = Math.floor(max);\r\n      return Math.floor(Math.random() * (max - min + 1)) + min;\r\n    },\r\n    pad: function (num, size) {\r\n      while (num.length < size) num = \"0\" + num;\r\n      return num;\r\n    },\r\n    getName: function(){\r\n      // eslint-disable-next-line no-console\r\n      // console.log(this);\r\n      // this.filename \r\n      // return this.json.data[0].title + \" tagged\";\r\n      let tmpJsonID = this.json.jsonID;\r\n      // delete this.json.jsonID;\r\n      return \"annotated_data_\" + tmpJsonID + \".json\";\r\n    }\r\n  },\r\n  computed: {\r\n    valid_json: function() {\r\n      var json = JSON.stringify(this.json).replace(/[\\u007F-\\uFFFF]/g, function(\r\n        chr\r\n      ) {\r\n        return \"\\\\u\" + (\"0000\" + chr.charCodeAt(0).toString(16)).substr(-4);\r\n      });\r\n      return json;\r\n    },\r\n    autocomplete: function() {\r\n      var idx = [];\r\n      for (var i = 0; i < this.json.data.length; i++) {\r\n        idx.push(this.json.data[i].title);\r\n      }\r\n      return idx;\r\n    },\r\n    items: function() {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ];\r\n      var items = [];\r\n      for (var i = 0; i < paragraph_container.qas.length; i++) {\r\n        var item = {\r\n          // fields: [\"שאלות\", \"תשובות\", \"עריכה\" , \"יש-תשובה\"]\r\n          שאלות: paragraph_container.qas[i].question,\r\n          תשובות: paragraph_container.qas[i].answers[0].text,\r\n          'יש תשובה בטקסט': paragraph_container.qas[i].answers[0].withAnswer\r\n        };\r\n        items.push(item);\r\n      }\r\n      return items;\r\n    },\r\n    paragraph_context: function() {\r\n      return this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ].context;\r\n    },\r\n    answer_start: function() {\r\n      return this.paragraph_context.indexOf(this.answer);\r\n    },\r\n    options() {\r\n      return {\r\n        radius: 15,\r\n        circleLineCap: \"round\",\r\n        varyStrokeArray: [1, 2],\r\n        pathColors: [\"lightgrey\", \"rgb(40, 167, 69)\"],\r\n        text: function(value) {\r\n          return (\r\n            this.htmlifyNumber(value) + '<span style=\"font-size: 1em;\">%</span>'\r\n          );\r\n        },\r\n        textColor: \"black\"\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n\r\n\r\n"],"sourceRoot":"src/components"}]}