{"remainingRequest":"C:\\Users\\roial\\Documents\\Work\\NLP\\Parashoot-Tagging\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\roial\\Documents\\Work\\NLP\\Parashoot-Tagging\\src\\components\\AnnotationsPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\roial\\Documents\\Work\\NLP\\Parashoot-Tagging\\src\\components\\AnnotationsPage.vue","mtime":1651411558045},{"path":"C:\\Users\\roial\\Documents\\Work\\NLP\\Parashoot-Tagging\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651395581657},{"path":"C:\\Users\\roial\\Documents\\Work\\NLP\\Parashoot-Tagging\\node_modules\\babel-loader\\lib\\index.js","mtime":1651395584250},{"path":"C:\\Users\\roial\\Documents\\Work\\NLP\\Parashoot-Tagging\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651395581657},{"path":"C:\\Users\\roial\\Documents\\Work\\NLP\\Parashoot-Tagging\\node_modules\\vue-loader\\lib\\index.js","mtime":1651395584089}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n\r\nconst uuidv4 = require('uuid/v4');\r\n\r\nexport default {\r\n  name: \"AnnotationsPage\",\r\n  props: [\"json\" , \"filename\"],\r\n  data: function() {\r\n    return {\r\n      data_number: 1,\r\n      context_number: 1,\r\n      question: \"\",\r\n      answer: \"\",\r\n      fields: [\"שאלות\", \"תשובות\", \"עריכה\"],\r\n      query: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    addAnnotation: function() {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ];\r\n      var qa = {\r\n        question: this.question,\r\n        id: uuidv4(),\r\n        answers: [{ answer_start: this.answer_start, text: this.answer }]\r\n      };\r\n      paragraph_container.qas.push(qa);\r\n      this.question = \"\";\r\n      this.answer = \"\";\r\n    },\r\n    deleteAnnotation: function(row_index) {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ];\r\n      paragraph_container.qas.splice(row_index, 1);\r\n    },\r\n    getSelection: function(fixStr) {\r\n      this.answer = fixStr;\r\n    },\r\n    delete_paragraph: function() {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs;\r\n      paragraph_container.splice([this.context_number - 1], 1);\r\n    },\r\n    delete_empty_document: function() {\r\n      for (var i in this.json.data) {\r\n        if (this.json.data[i].paragraphs.length == 0) {\r\n          this.json.data.splice(i, 1);\r\n        }\r\n      }\r\n    },\r\n    getName: function(){\r\n      // eslint-disable-next-line no-console\r\n      // console.log(this);\r\n      // this.filename \r\n      return this.json.data[0].title + \" tagged\";\r\n    }\r\n  },\r\n  computed: {\r\n    valid_json: function() {\r\n      var json = JSON.stringify(this.json).replace(/[\\u007F-\\uFFFF]/g, function(\r\n        chr\r\n      ) {\r\n        return \"\\\\u\" + (\"0000\" + chr.charCodeAt(0).toString(16)).substr(-4);\r\n      });\r\n      return json;\r\n    },\r\n    autocomplete: function() {\r\n      var idx = [];\r\n      for (var i = 0; i < this.json.data.length; i++) {\r\n        idx.push(this.json.data[i].title);\r\n      }\r\n      return idx;\r\n    },\r\n    items: function() {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ];\r\n      var items = [];\r\n      for (var i = 0; i < paragraph_container.qas.length; i++) {\r\n        var item = {\r\n          Questions: paragraph_container.qas[i].question,\r\n          Answers: paragraph_container.qas[i].answers[0].text\r\n        };\r\n        items.push(item);\r\n      }\r\n      return items;\r\n    },\r\n    paragraph_context: function() {\r\n      return this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ].context;\r\n    },\r\n    answer_start: function() {\r\n      return this.paragraph_context.indexOf(this.answer);\r\n    },\r\n    options() {\r\n      return {\r\n        radius: 15,\r\n        circleLineCap: \"round\",\r\n        varyStrokeArray: [1, 2],\r\n        pathColors: [\"lightgrey\", \"rgb(40, 167, 69)\"],\r\n        text: function(value) {\r\n          return (\r\n            this.htmlifyNumber(value) + '<span style=\"font-size: 1em;\">%</span>'\r\n          );\r\n        },\r\n        textColor: \"black\"\r\n      };\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["AnnotationsPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AnnotationsPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"AnnotationsPage container mt-3\">\r\n    <div>\r\n      <b-navbar sticky toggleable=\"lg\" class=\"pl-0\">\r\n        <b-navbar-brand>cdQA-annotator</b-navbar-brand>\r\n\r\n        <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\r\n\r\n        <b-collapse id=\"nav-collapse\" is-nav>\r\n          <!-- Right aligned nav items -->\r\n          <b-navbar-nav class=\"ml-auto\">\r\n            <b-nav-item>\r\n              <svg-progress-bar :value=\"data_number / json.data.length * 100\" :options=\"options\"></svg-progress-bar>\r\n            </b-nav-item>\r\n            <b-nav-form>\r\n              <!-- <vue-bootstrap-typeahead\r\n                size=\"sm\"\r\n                v-model=\"query\"\r\n                :data=\"autocomplete\"\r\n                placeholder=\"Search a document...\"\r\n                @hit=\"data_number = autocomplete.indexOf($event) + 1; context_number = 1\"\r\n              /> -->\r\n            </b-nav-form>\r\n            <b-nav-item right>\r\n              <b-button\r\n                :size=\"'sm'\"\r\n                :variant=\"'primary'\"\r\n                v-on:click=\"delete_empty_document()\"\r\n                v-download-data=\"valid_json\"\r\n                v-download-data:type=\"'json'\"\r\n                v-download-data:filename=\"getName()\"\r\n              >Download</b-button>\r\n            </b-nav-item>\r\n          </b-navbar-nav>\r\n        </b-collapse>\r\n      </b-navbar>\r\n    </div>\r\n    <br>\r\n    <div v-if=\"data_number - 1 < json.data.length\">\r\n      <h2>{{ json.data[data_number - 1].title }}</h2>\r\n      <span\r\n        class=\"text-muted\" dir=\"rtl\" \r\n      >פסקה {{ context_number }} מתוך {{ json.data[data_number - 1].paragraphs.length }} | מסמך {{ data_number }} מתוך {{ json.data.length }}</span>\r\n      <br>\r\n      <br>\r\n      <p ref=\"paragraph\" v-selection.fix=\"{getSelection:getSelection}\" dir=\"rtl\">{{ paragraph_context }}</p>\r\n      <br>\r\n\r\n      <b-form-input v-model=\"question\" type=\"text\" placeholder=\"הקלידו שאלה שיש לה מענה...\" dir=\"rtl\"></b-form-input>\r\n      <br>\r\n\r\n      <b-form-input v-model=\"answer\" type=\"text\" placeholder=\"סמנו תשובה מתוך הפסקה - היא תופיע פה\" dir=\"rtl\"></b-form-input>\r\n      <br>\r\n\r\n      <b-button :size=\"''\" :variant=\"'secondary'\" v-on:click=\"addAnnotation()\">הוספת שאלה ותשובה</b-button> \r\n      <br>\r\n      <br>\r\n\r\n      <b-table striped hover :items=\"items\" :fields=\"fields\">\r\n        <template slot=\"Edit\" slot-scope=\"row\">\r\n          <b-button :size=\"''\" :variant=\"'danger'\" @click.stop=\"deleteAnnotation(row.index)\">Delete</b-button>\r\n        </template>\r\n      </b-table>\r\n      <br>\r\n\r\n      <div v-if=\"data_number > 1 && context_number == 1\">\r\n        <b-button\r\n          :size=\"''\"\r\n          :variant=\"'outline-secondary'\"\r\n          v-on:click=\"data_number -= 1, context_number = json.data[data_number - 1].paragraphs.length\"\r\n        >לפסקה הקודמת</b-button> או \r\n        <b-button :size=\"''\" :variant=\"'outline-primary'\" v-on:click=\"context_number += 1\">לפסקה הבאה</b-button>\r\n      </div>\r\n      <div v-else-if=\"context_number < json.data[data_number - 1].paragraphs.length\">\r\n        <b-button\r\n          :size=\"''\"\r\n          :variant=\"'outline-secondary'\"\r\n          v-on:click=\"context_number -= 1\"\r\n        >לפסקה הקודמת</b-button> או \r\n        <b-button :size=\"''\" :variant=\"'outline-primary'\" v-on:click=\"context_number += 1\">לפסקה הבאה</b-button>\r\n      </div>\r\n      <div v-else>\r\n        <b-button\r\n          :size=\"''\"\r\n          :variant=\"'outline-secondary'\"\r\n          v-on:click=\"context_number -= 1\"\r\n        >לפסקה הקודמת</b-button> או \r\n        <b-button\r\n          :size=\"''\"\r\n          :variant=\"'outline-primary'\"\r\n          v-on:click=\"data_number += 1, context_number = 1\"\r\n        >לפסקה הבאה</b-button>\r\n      </div>\r\n      <br>\r\n      <br>\r\n    </div>\r\n    <div v-else>\r\n      There are no more data to annotate. You can now download your annotated dataset\r\n      <img\r\n        src=\"../assets/ablobmaracas.gif\"\r\n        height=\"30\"\r\n        width=\"30\"\r\n      >\r\n      <br>\r\n      <br>\r\n      <b-button\r\n        :size=\"''\"\r\n        :variant=\"'primary'\"\r\n        v-on:click=\"delete_empty_document()\"\r\n        v-download-data=\"valid_json\"\r\n        v-download-data:type=\"'json'\"\r\n        v-download-data:filename=\"getName()\"\r\n      >Download</b-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nconst uuidv4 = require('uuid/v4');\r\n\r\nexport default {\r\n  name: \"AnnotationsPage\",\r\n  props: [\"json\" , \"filename\"],\r\n  data: function() {\r\n    return {\r\n      data_number: 1,\r\n      context_number: 1,\r\n      question: \"\",\r\n      answer: \"\",\r\n      fields: [\"שאלות\", \"תשובות\", \"עריכה\"],\r\n      query: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    addAnnotation: function() {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ];\r\n      var qa = {\r\n        question: this.question,\r\n        id: uuidv4(),\r\n        answers: [{ answer_start: this.answer_start, text: this.answer }]\r\n      };\r\n      paragraph_container.qas.push(qa);\r\n      this.question = \"\";\r\n      this.answer = \"\";\r\n    },\r\n    deleteAnnotation: function(row_index) {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ];\r\n      paragraph_container.qas.splice(row_index, 1);\r\n    },\r\n    getSelection: function(fixStr) {\r\n      this.answer = fixStr;\r\n    },\r\n    delete_paragraph: function() {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs;\r\n      paragraph_container.splice([this.context_number - 1], 1);\r\n    },\r\n    delete_empty_document: function() {\r\n      for (var i in this.json.data) {\r\n        if (this.json.data[i].paragraphs.length == 0) {\r\n          this.json.data.splice(i, 1);\r\n        }\r\n      }\r\n    },\r\n    getName: function(){\r\n      // eslint-disable-next-line no-console\r\n      // console.log(this);\r\n      // this.filename \r\n      return this.json.data[0].title + \" tagged\";\r\n    }\r\n  },\r\n  computed: {\r\n    valid_json: function() {\r\n      var json = JSON.stringify(this.json).replace(/[\\u007F-\\uFFFF]/g, function(\r\n        chr\r\n      ) {\r\n        return \"\\\\u\" + (\"0000\" + chr.charCodeAt(0).toString(16)).substr(-4);\r\n      });\r\n      return json;\r\n    },\r\n    autocomplete: function() {\r\n      var idx = [];\r\n      for (var i = 0; i < this.json.data.length; i++) {\r\n        idx.push(this.json.data[i].title);\r\n      }\r\n      return idx;\r\n    },\r\n    items: function() {\r\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ];\r\n      var items = [];\r\n      for (var i = 0; i < paragraph_container.qas.length; i++) {\r\n        var item = {\r\n          Questions: paragraph_container.qas[i].question,\r\n          Answers: paragraph_container.qas[i].answers[0].text\r\n        };\r\n        items.push(item);\r\n      }\r\n      return items;\r\n    },\r\n    paragraph_context: function() {\r\n      return this.json.data[this.data_number - 1].paragraphs[\r\n        this.context_number - 1\r\n      ].context;\r\n    },\r\n    answer_start: function() {\r\n      return this.paragraph_context.indexOf(this.answer);\r\n    },\r\n    options() {\r\n      return {\r\n        radius: 15,\r\n        circleLineCap: \"round\",\r\n        varyStrokeArray: [1, 2],\r\n        pathColors: [\"lightgrey\", \"rgb(40, 167, 69)\"],\r\n        text: function(value) {\r\n          return (\r\n            this.htmlifyNumber(value) + '<span style=\"font-size: 1em;\">%</span>'\r\n          );\r\n        },\r\n        textColor: \"black\"\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n\r\n\r\n"]}]}